# 廣清宮記帳軟體 - 構建指南

## 🚨 Node.js版本兼容性問題

由於您使用的是Node.js v22.17.1，而當前的構建工具鏈存在兼容性問題，我們提供以下解決方案：

## 🎯 推薦解決方案

### 方案一：使用預構建版本（推薦）⭐
直接使用已經完成的HTML版本，無需構建：
- `index-enhanced.html` - 完整功能版本
- `index-simple.html` - 基本功能版本

### 方案二：降級Node.js版本
1. **安裝Node.js 18.x版本**
   - 下載：https://nodejs.org/download/release/v18.17.0/
   - 或使用nvm：`nvm install 18.17.0 && nvm use 18.17.0`

2. **清理並重新安裝**
   ```bash
   # 使用PowerShell腳本
   .\clean-install.ps1
   
   # 或手動執行
   rm -rf node_modules package-lock.json
   npm cache clean --force
   npm install --legacy-peer-deps
   ```

### 方案三：使用Yarn替代npm
```bash
# 安裝Yarn
npm install -g yarn

# 清理並安裝
rm -rf node_modules package-lock.json yarn.lock
yarn install
yarn dev
```

## 🔧 構建步驟（Node.js 18.x）

### 1. 環境準備
```bash
# 檢查Node.js版本
node --version  # 應該是 18.x

# 檢查npm版本
npm --version   # 應該是 9.x+
```

### 2. 安裝依賴
```bash
# 方法A：使用腳本（推薦）
.\clean-install.ps1

# 方法B：手動安裝
npm install --legacy-peer-deps --no-optional
```

### 3. 開發模式
```bash
npm run dev
# 或
yarn dev
```
瀏覽器會自動打開 http://localhost:5173

### 4. 構建生產版本
```bash
npm run build
# 或
yarn build
```
構建結果在 `dist/` 目錄

### 5. 預覽構建結果
```bash
npm run preview
# 或
yarn preview
```

## 📁 專案結構

```
廣清宮快速記帳軟體/
├── src/                    # 源代碼
│   ├── main.js            # 應用入口
│   ├── App.vue            # 根組件
│   ├── components/        # 組件
│   ├── views/             # 頁面
│   ├── stores/            # Pinia狀態管理
│   ├── router/            # Vue Router路由
│   ├── utils/             # 工具函數
│   └── styles/            # 樣式文件
├── public/                # 靜態資源
├── dist/                  # 構建輸出
├── index-enhanced.html    # 預��建完整版
├── index-simple.html      # 預構建簡化版
├── package.json           # 依賴配置
├── vite.config.js         # Vite配置
└── clean-install.ps1      # 清理安裝腳本
```

## 🛠️ 技術棧詳情

### 前端框架
- **Vue 3.3.4** - 組合式API，響應式系統
- **Vite 4.4.5** - 快速構建工具
- **TypeScript支援** - 可選的類型檢查

### 狀態管理
- **Pinia 2.1.6** - Vue 3官方推薦的狀態管理
- **持久化存儲** - localStorage集成

### 路由管理
- **Vue Router 4.2.4** - 單頁應用路由
- **懶加載** - 按需加載頁面組件

### UI組件庫
- **Element Plus 2.3.8** - 企業級UI組件
- **@element-plus/icons-vue** - 圖標庫
- **響應式設計** - 支援桌面和手機

### 圖表庫
- **ECharts 5.4.3** - 豐富的圖表組件
- **財務圖表** - 收支趨勢、分類統計

### 工具庫
- **Day.js 1.11.9** - 輕量級日期處理
- **本地化支援** - 繁體中文

## 🚨 常見問題

### Q1: npm install失敗
**A:** 使用以下命令：
```bash
npm install --legacy-peer-deps --no-optional
```

### Q2: Node.js版本太新
**A:** 降級到Node.js 18.x或直接使用HTML版本

### Q3: 權限錯誤
**A:** 以管理員身份運行PowerShell，或使用yarn

### Q4: 依賴衝突
**A:** 清理緩存並重新安裝：
```bash
npm cache clean --force
rm -rf node_modules package-lock.json
npm install
```

### Q5: 構建失敗
**A:** 檢查Node.js版本，確保使用18.x

## 🎯 開發建議

### 開發環境
- **IDE**: VS Code + Vetur/Volar插件
- **瀏覽器**: Chrome DevTools
- **調試**: Vue DevTools擴展

### 代碼規範
- **ESLint**: 代碼檢查
- **Prettier**: 代碼格式化
- **Git Hooks**: 提交前檢查

### 性能優化
- **懶加載**: 路由和組件按需加載
- **Tree Shaking**: 自動移除未使用代碼
- **代碼分割**: 第三方庫單獨打包

## 📦 部署選項

### 靜態部署
- **Netlify**: 拖拽dist文件夾
- **Vercel**: 連接Git倉庫自動部署
- **GitHub Pages**: 免費靜態託管

### 服務器部署
- **Nginx**: 配置靜態文件服務
- **Apache**: 配置虛擬主機
- **CDN**: 加速全球訪問

## 🔄 更新維護

### 依賴更新
```bash
# 檢查過時依賴
npm outdated

# 更新依賴
npm update

# 安全更新
npm audit fix
```

### 版本管理
- 使用語義化版本號
- 定期備份重要版本
- 記錄變更日誌

---

## 💡 總結

如果您遇到構建問題，**強烈建議直接使用 `index-enhanced.html`**，它包含了所有功能且無需構建環境。

如果需要開發環境，請降級到Node.js 18.x版本以獲得最佳兼容性。

© 2024 廣��宮開發團隊