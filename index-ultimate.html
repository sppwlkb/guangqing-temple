<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Âª£Ê∏ÖÂÆÆÊô∫ËÉΩË®òÂ∏≥Á≥ªÁµ± - ÁµÇÊ•µÁâà</title>
    
    <!-- PWAÊîØÊè¥ -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#667eea">
    <link rel="apple-touch-icon" href="icon-192.png">
    
    <!-- Element Plus CSS -->
    <link rel="stylesheet" href="https://unpkg.com/element-plus@2.3.8/dist/index.css">
    
    <!-- Vue 3 -->
    <script src="https://unpkg.com/vue@3.3.4/dist/vue.global.js"></script>
    
    <!-- Element Plus -->
    <script src="https://unpkg.com/element-plus@2.3.8/dist/index.full.js"></script>
    
    <!-- Element Plus Icons -->
    <script src="https://unpkg.com/@element-plus/icons-vue@2.1.0/dist/index.iife.min.js"></script>
    
    <!-- ECharts -->
    <script src="https://unpkg.com/echarts@5.4.3/dist/echarts.min.js"></script>
    
    <!-- Day.js -->
    <script src="https://unpkg.com/dayjs@1.11.9/dayjs.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f5f7fa;
            user-select: none;
            -webkit-user-select: none;
            -webkit-touch-callout: none;
        }
        
        .app-container {
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .app-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 0 20px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .app-title {
            font-size: 20px;
            font-weight: bold;
        }
        
        .header-actions {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ff4757;
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .main-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }
        
        .page-content {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .stat-value {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: #666;
            font-size: 14px;
        }
        
        .income { color: #1cc88a; }
        .expense { color: #e74a3b; }
        .balance { color: #36b9cc; }
        
        .content-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .content-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .card-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
        }
        
        .record-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }
        
        .record-item:last-child {
            border-bottom: none;
        }
        
        .record-info {
            flex: 1;
        }
        
        .record-category {
            font-weight: 500;
            margin-bottom: 2px;
        }
        
        .record-date {
            font-size: 12px;
            color: #666;
        }
        
        .record-amount {
            font-weight: bold;
            font-size: 16px;
        }
        
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: #667eea;
            color: white;
        }
        
        .btn-primary:hover {
            background: #5a6fd8;
        }
        
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #5a6268;
        }
        
        .btn-success {
            background: #1cc88a;
            color: white;
        }
        
        .btn-success:hover {
            background: #17a673;
        }
        
        .btn-danger {
            background: #e74a3b;
            color: white;
        }
        
        .btn-danger:hover {
            background: #c0392b;
        }
        
        .btn-warning {
            background: #f39c12;
            color: white;
        }
        
        .btn-warning:hover {
            background: #d68910;
        }
        
        .chart-container {
            height: 300px;
            margin-top: 20px;
        }
        
        .reminder-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            margin-bottom: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        
        .reminder-item.urgent {
            border-left-color: #e74a3b;
            background: #fff5f5;
        }
        
        .reminder-content {
            flex: 1;
        }
        
        .reminder-title {
            font-weight: 500;
            margin-bottom: 2px;
        }
        
        .reminder-date {
            font-size: 12px;
            color: #666;
        }
        
        .reminder-actions {
            display: flex;
            gap: 5px;
        }
        
        .believer-card {
            background: white;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-left: 4px solid #667eea;
        }
        
        .believer-card.taisui-warning {
            border-left-color: #e74a3b;
            background: linear-gradient(135deg, #fff5f5 0%, #ffffff 100%);
        }
        
        .believer-name {
            font-size: 16px;
            font-weight: bold;
            color: #333;
            margin-bottom: 8px;
        }
        
        .believer-info {
            color: #666;
            margin-bottom: 4px;
            font-size: 13px;
        }
        
        .taisui-alert {
            background: #f8d7da;
            color: #721c24;
            padding: 8px;
            border-radius: 4px;
            margin-top: 8px;
            font-size: 12px;
            border: 1px solid #f5c6cb;
        }
        
        @media (max-width: 768px) {
            .content-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .app-title {
                font-size: 16px;
            }
            
            .header-actions {
                gap: 5px;
            }
        }
        
        /* Element Plus Ëá™ÂÆöÁæ©Ê®£Âºè */
        .el-tabs__item {
            font-size: 16px;
            font-weight: 500;
        }
        
        .el-tabs__item.is-active {
            color: #667eea;
        }
        
        .el-tabs__active-bar {
            background-color: #667eea;
        }
        
        .el-button--primary {
            background-color: #667eea;
            border-color: #667eea;
        }
        
        .el-button--primary:hover {
            background-color: #5a6fd8;
            border-color: #5a6fd8;
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="app-container">
            <!-- È†ÇÈÉ®Ê®ôÈ°å -->
            <div class="app-header">
                <div class="app-title">üèõÔ∏è Âª£Ê∏ÖÂÆÆÊô∫ËÉΩË®òÂ∏≥Á≥ªÁµ±</div>
                <div class="header-actions">
                    <el-button type="primary" @click="showAddModal = true" size="small">
                        Âø´ÈÄüË®òÂ∏≥
                    </el-button>
                    <div style="position: relative;">
                        <el-button type="info" @click="showNotifications" size="small" circle>
                            <el-icon><Bell /></el-icon>
                        </el-button>
                        <div v-if="urgentReminders.length > 0" class="notification-badge">
                            {{ urgentReminders.length }}
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ‰∏ªË¶ÅÂÖßÂÆπ -->
            <div class="main-content">
                <div class="page-content">
                    <!-- Áµ±Ë®àÂç°Áâá -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value income">{{ formatCurrency(totalIncome) }}</div>
                            <div class="stat-label">Á∏ΩÊî∂ÂÖ•</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value expense">{{ formatCurrency(totalExpense) }}</div>
                            <div class="stat-label">Á∏ΩÊîØÂá∫</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value balance">{{ formatCurrency(totalBalance) }}</div>
                            <div class="stat-label">ÁµêÈ§ò</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" style="color: #667eea;">{{ believers.length }}</div>
                            <div class="stat-label">‰ø°Áúæ‰∫∫Êï∏</div>
                        </div>
                    </div>
                    
                    <!-- Ê®ôÁ±§È†ÅÂÖßÂÆπ -->
                    <el-tabs v-model="currentPage" @tab-click="handleTabClick">
                        <!-- Ë®òÂ∏≥ÁÆ°ÁêÜ -->
                        <el-tab-pane label="üìù Ë®òÂ∏≥ÁÆ°ÁêÜ" name="records">
                            <div class="content-grid">
                                <div class="content-card">
                                    <div class="card-title">ÊúÄËøëË®òÈåÑ</div>
                                    <div v-if="recentRecords.length === 0" style="text-align: center; color: #999; padding: 40px;">
                                        Êö´ÁÑ°Ë®òÈåÑÔºåÈªûÊìäÂè≥‰∏äËßí„ÄåÂø´ÈÄüË®òÂ∏≥„ÄçÈñãÂßãË®òÈåÑ
                                    </div>
                                    <div v-for="record in recentRecords" :key="record.id" class="record-item">
                                        <div class="record-info">
                                            <div class="record-category">{{ record.category }}</div>
                                            <div class="record-date">{{ formatDate(record.date) }}</div>
                                            <div v-if="record.donor" style="font-size: 11px; color: #999;">üë§ {{ record.donor }}</div>
                                        </div>
                                        <div class="record-amount" :class="record.type">
                                            {{ record.type === 'income' ? '+' : '-' }}{{ formatCurrency(record.amount) }}
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="content-card">
                                    <div class="card-title">Êî∂ÊîØË∂®Âã¢</div>
                                    <div id="trend-chart" class="chart-container"></div>
                                </div>
                            </div>
                        </el-tab-pane>

                        <!-- ‰ø°ÁúæÁÆ°ÁêÜ -->
                        <el-tab-pane label="üë• ‰ø°ÁúæÁÆ°ÁêÜ" name="believers">
                            <div style="margin-bottom: 20px;">
                                <el-button type="success" @click="showBelieverModal = true">
                                    <el-icon><Plus /></el-icon>
                                    Êñ∞Â¢û‰ø°Áúæ
                                </el-button>
                                <el-button type="warning" @click="checkTaiSuiForAll">
                                    <el-icon><Warning /></el-icon>
                                    Ê™¢Êü•ÁäØÂ§™Ê≠≤
                                </el-button>
                            </div>

                            <div v-if="believers.length === 0" style="text-align: center; color: #999; padding: 40px;">
                                Êö´ÁÑ°‰ø°ÁúæË≥áÊñôÔºåË´ãÊñ∞Â¢ûÁ¨¨‰∏Ä‰Ωç‰ø°Áúæ
                            </div>

                            <el-row :gutter="20">
                                <el-col :span="8" v-for="believer in believers" :key="believer.name">
                                    <div class="believer-card" :class="{ 'taisui-warning': isTaiSuiBeliever(believer) }">
                                        <div class="believer-name">{{ believer.name }}</div>
                                        <div class="believer-info">üìû {{ believer.phone || 'Êú™Êèê‰æõ' }}</div>
                                        <div class="believer-info">üìß {{ believer.email || 'Êú™Êèê‰æõ' }}</div>
                                        <div class="believer-info">üéÇ {{ believer.birthday || 'Êú™Êèê‰æõ' }}</div>
                                        <div v-if="getBelieverZodiac(believer)" class="believer-info" style="font-weight: bold; color: #667eea;">
                                            üê≤ ÁîüËÇñÔºö{{ getBelieverZodiac(believer) }}
                                        </div>
                                        <div class="believer-info">üè† {{ believer.address || 'Êú™Êèê‰æõ' }}</div>
                                        <div class="believer-info">üí∞ Á¥ØË®àÊçêÊ¨æÔºö${{ (believer.totalDonation || 0).toLocaleString() }}</div>
                                        <div class="believer-info">üìä ÊçêÊ¨æÊ¨°Êï∏Ôºö{{ believer.donationCount || 0 }}Ê¨°</div>

                                        <div v-if="isTaiSuiBeliever(believer)" class="taisui-alert">
                                            ‚ö†Ô∏è {{ new Date().getFullYear() }}Âπ¥ÁäØÂ§™Ê≠≤ÔºåÂª∫Ë≠∞ÈªûÂ§™Ê≠≤ÁáàÁ•àÁ¶è
                                            <el-button size="small" type="warning" @click="notifyBeliever(believer.name)" style="margin-left: 8px;">
                                                ÁôºÈÄÅÊèêÈÜí
                                            </el-button>
                                        </div>

                                        <div style="margin-top: 12px;">
                                            <el-button size="small" @click="editBeliever(believer)">Á∑®ËºØ</el-button>
                                            <el-button size="small" type="danger" @click="deleteBeliever(believer.name)">Âà™Èô§</el-button>
                                        </div>
                                    </div>
                                </el-col>
                            </el-row>
                        </el-tab-pane>

                        <!-- ÂàÜÊûêÂ†±Ë°® -->
                        <el-tab-pane label="üìä ÂàÜÊûêÂ†±Ë°®" name="analysis">
                            <el-row :gutter="20">
                                <el-col :span="12">
                                    <div class="content-card">
                                        <div class="card-title">Êî∂ÂÖ•ÁµêÊßãÂàÜÊûê</div>
                                        <div id="income-chart" class="chart-container"></div>
                                    </div>
                                </el-col>
                                <el-col :span="12">
                                    <div class="content-card">
                                        <div class="card-title">ÊîØÂá∫ÁµêÊßãÂàÜÊûê</div>
                                        <div id="expense-chart" class="chart-container"></div>
                                    </div>
                                </el-col>
                            </el-row>

                            <div class="content-card" style="margin-top: 20px;">
                                <div class="card-title">ÊúàÂ∫¶Êî∂ÊîØÂ∞çÊØî</div>
                                <div id="monthly-chart" class="chart-container"></div>
                            </div>
                        </el-tab-pane>

                        <!-- Â§™Ê≠≤ÊèêÈÜí -->
                        <el-tab-pane label="üèÆ Â§™Ê≠≤ÊèêÈÜí" name="taisui">
                            <div style="margin-bottom: 20px;">
                                <el-select v-model="selectedYear" @change="updateTaiSuiInfo" style="margin-right: 10px;">
                                    <el-option label="2024Âπ¥ (Áî≤Ëæ∞ÈæçÂπ¥)" value="2024"></el-option>
                                    <el-option label="2025Âπ¥ (‰πôÂ∑≥ËõáÂπ¥)" value="2025"></el-option>
                                    <el-option label="2026Âπ¥ (‰∏ôÂçàÈ¶¨Âπ¥)" value="2026"></el-option>
                                </el-select>
                                <el-button type="primary" @click="sendTaiSuiReminders">
                                    <el-icon><Message /></el-icon>
                                    ÊâπÈáèÁôºÈÄÅÊèêÈÜí
                                </el-button>
                            </div>

                            <el-alert
                                :title="`${selectedYear}Âπ¥${getYearZodiacName(selectedYear)}Âπ¥ÁäØÂ§™Ê≠≤ÁîüËÇñ`"
                                type="warning"
                                :closable="false"
                                style="margin-bottom: 20px;">
                                <div v-for="conflict in getTaiSuiConflicts(parseInt(selectedYear))" :key="conflict.type" style="margin-bottom: 8px;">
                                    <strong>{{ conflict.type }}Ôºö</strong>
                                    <el-tag v-for="zodiac in conflict.signs" :key="zodiac" type="danger" style="margin-right: 5px;">
                                        {{ getZodiacEmoji(zodiac) }} {{ zodiac }}
                                    </el-tag>
                                </div>
                            </el-alert>

                            <div class="content-card">
                                <div class="card-title">ÈúÄË¶ÅÈªûÂ§™Ê≠≤ÁáàÁöÑ‰ø°Áúæ ({{ taisuiBelievers.length }}‰Ωç)</div>
                                <div v-if="taisuiBelievers.length === 0" style="text-align: center; color: #999; padding: 40px;">
                                    ÁõÆÂâçÊ≤íÊúâ‰ø°ÁúæÈúÄË¶ÅÈªûÂ§™Ê≠≤Ááà
                                </div>
                                <el-row :gutter="20">
                                    <el-col :span="8" v-for="believer in taisuiBelievers" :key="believer.name">
                                        <div class="believer-card taisui-warning">
                                            <div class="believer-name">{{ believer.name }}</div>
                                            <div class="believer-info">
                                                ÁîüËÇñÔºö{{ getBelieverZodiac(believer) }}
                                                ({{ getTaiSuiType(believer) }})
                                            </div>
                                            <div class="believer-info">üìû {{ believer.phone || 'Êú™Êèê‰æõ' }}</div>
                                            <div class="believer-info">üìß {{ believer.email || 'Êú™Êèê‰æõ' }}</div>
                                            <el-button size="small" type="warning" @click="notifyBeliever(believer.name)">
                                                ÁôºÈÄÅÊèêÈÜí
                                            </el-button>
                                        </div>
                                    </el-col>
                                </el-row>
                            </div>
                        </el-tab-pane>

                        <!-- Êô∫ËÉΩÊèêÈÜí -->
                        <el-tab-pane label="üîî Êô∫ËÉΩÊèêÈÜí" name="reminders">
                            <div style="margin-bottom: 20px;">
                                <el-button type="primary" @click="showReminderModal = true">
                                    <el-icon><Plus /></el-icon>
                                    Êñ∞Â¢ûÊèêÈÜí
                                </el-button>
                            </div>

                            <div v-if="allReminders.length === 0" style="text-align: center; color: #999; padding: 40px;">
                                Êö´ÁÑ°ÊèêÈÜí‰∫ãÈ†ÖÔºåÈªûÊìä„ÄåÊñ∞Â¢ûÊèêÈÜí„ÄçÈñãÂßãË®≠ÂÆö
                            </div>

                            <div v-for="reminder in allReminders" :key="reminder.id" class="reminder-item" :class="{ urgent: isUrgent(reminder) }">
                                <div class="reminder-content">
                                    <div class="reminder-title">{{ reminder.title }}</div>
                                    <div class="reminder-date">{{ formatReminderDate(reminder) }}</div>
                                </div>
                                <div class="reminder-actions">
                                    <el-button size="small" @click="editReminder(reminder)">Á∑®ËºØ</el-button>
                                    <el-button size="small" type="success" @click="markReminderDone(reminder.id)">ÂÆåÊàê</el-button>
                                    <el-button size="small" type="warning" @click="snoozeReminder(reminder.id)">Âª∂Âæå</el-button>
                                    <el-button size="small" type="danger" @click="deleteReminder(reminder.id)">Âà™Èô§</el-button>
                                </div>
                            </div>
                        </el-tab-pane>
                    </el-tabs>
                </div>
            </div>
        </div>

        <!-- Ë®òÂ∏≥Ê®°ÊÖãÊ°Ü -->
        <el-dialog v-model="showAddModal" :title="modalTitle" width="500px">
            <el-form :model="form" label-width="80px">
                <el-form-item label="È°ûÂûã">
                    <el-select v-model="form.type" @change="updateCategories" placeholder="Ë´ãÈÅ∏ÊìáÈ°ûÂûã">
                        <el-option label="Êî∂ÂÖ•" value="income"></el-option>
                        <el-option label="ÊîØÂá∫" value="expense"></el-option>
                    </el-select>
                </el-form-item>
                <el-form-item label="ÈáëÈ°ç">
                    <el-input-number v-model="form.amount" :min="0" :precision="0" style="width: 100%"></el-input-number>
                </el-form-item>
                <el-form-item label="ÂàÜÈ°û">
                    <el-select v-model="form.category" placeholder="Ë´ãÈÅ∏ÊìáÂàÜÈ°û">
                        <el-option v-for="cat in currentCategories" :key="cat" :label="cat" :value="cat"></el-option>
                    </el-select>
                </el-form-item>
                <el-form-item label="‰ø°ÁúæÂßìÂêç">
                    <el-select v-model="form.donor" filterable allow-create placeholder="Ë´ãÈÅ∏ÊìáÊàñËº∏ÂÖ•‰ø°ÁúæÂßìÂêç">
                        <el-option v-for="believer in believers" :key="believer.name" :label="believer.name" :value="believer.name"></el-option>
                    </el-select>
                </el-form-item>
                <el-form-item label="Ë™™Êòé">
                    <el-input v-model="form.description" type="textarea" rows="3"></el-input>
                </el-form-item>
                <el-form-item label="Êó•Êúü">
                    <el-date-picker v-model="form.date" type="date" style="width: 100%"></el-date-picker>
                </el-form-item>
            </el-form>
            <template #footer>
                <el-button @click="closeAddModal">ÂèñÊ∂à</el-button>
                <el-button type="primary" @click="saveRecord">ÂÑ≤Â≠ò</el-button>
            </template>
        </el-dialog>

        <!-- ‰ø°ÁúæË≥áÊñôÊ®°ÊÖãÊ°Ü -->
        <el-dialog v-model="showBelieverModal" title="‰ø°ÁúæË≥áÊñô" width="500px">
            <el-form :model="believerForm" label-width="80px">
                <el-form-item label="ÂßìÂêç" required>
                    <el-input v-model="believerForm.name"></el-input>
                </el-form-item>
                <el-form-item label="ÁîüÊó•">
                    <el-date-picker v-model="believerForm.birthday" type="date" style="width: 100%" @change="updateBelieverZodiac"></el-date-picker>
                    <div v-if="believerZodiacDisplay" style="margin-top: 5px; color: #667eea; font-weight: bold;">
                        {{ believerZodiacDisplay }}
                    </div>
                </el-form-item>
                <el-form-item label="ÈõªË©±">
                    <el-input v-model="believerForm.phone"></el-input>
                </el-form-item>
                <el-form-item label="Email">
                    <el-input v-model="believerForm.email" type="email"></el-input>
                </el-form-item>
                <el-form-item label="Âú∞ÂùÄ">
                    <el-input v-model="believerForm.address" type="textarea" rows="2"></el-input>
                </el-form-item>
            </el-form>
            <template #footer>
                <el-button @click="closeBelieverModal">ÂèñÊ∂à</el-button>
                <el-button type="primary" @click="saveBeliever">ÂÑ≤Â≠ò</el-button>
            </template>
        </el-dialog>

        <!-- ÊèêÈÜíÊ®°ÊÖãÊ°Ü -->
        <el-dialog v-model="showReminderModal" :title="reminderModalTitle" width="500px">
            <el-form :model="reminderForm" label-width="80px">
                <el-form-item label="Ê®ôÈ°å" required>
                    <el-input v-model="reminderForm.title"></el-input>
                </el-form-item>
                <el-form-item label="Ë™™Êòé">
                    <el-input v-model="reminderForm.description" type="textarea" rows="3"></el-input>
                </el-form-item>
                <el-form-item label="Âà∞ÊúüÊó•">
                    <el-date-picker v-model="reminderForm.dueDate" type="date" style="width: 100%"></el-date-picker>
                </el-form-item>
                <el-form-item label="ÈáçË§á">
                    <el-select v-model="reminderForm.repeat">
                        <el-option label="‰∏çÈáçË§á" value="none"></el-option>
                        <el-option label="ÊØèÊó•" value="daily"></el-option>
                        <el-option label="ÊØèÈÄ±" value="weekly"></el-option>
                        <el-option label="ÊØèÊúà" value="monthly"></el-option>
                        <el-option label="ÊØèÂπ¥" value="yearly"></el-option>
                    </el-select>
                </el-form-item>
                <el-form-item label="ÊèêÂâçÂ§©Êï∏">
                    <el-input-number v-model="reminderForm.advanceDays" :min="0" :max="30"></el-input-number>
                </el-form-item>
            </el-form>
            <template #footer>
                <el-button @click="closeReminderModal">ÂèñÊ∂à</el-button>
                <el-button type="primary" @click="saveReminder">ÂÑ≤Â≠ò</el-button>
            </template>
        </el-dialog>

        <!-- ÈÄöÁü•ÂΩàÁ™ó -->
        <el-dialog v-model="showNotificationPopup" title="üì¢ ÈáçË¶ÅÊèêÈÜí" width="400px">
            <div v-if="currentNotification">
                <h3>{{ currentNotification.title }}</h3>
                <p>{{ currentNotification.description }}</p>
                <p><strong>Âà∞ÊúüÊó•Ôºö</strong>{{ formatDate(currentNotification.dueDate) }}</p>
            </div>
            <template #footer>
                <el-button @click="showNotificationPopup = false">Áü•ÈÅì‰∫Ü</el-button>
            </template>
        </el-dialog>
    </div>

    <script>
        const { createApp, ref, computed, onMounted, nextTick } = Vue;
        const { ElMessage, ElMessageBox } = ElementPlus;

        createApp({
            setup() {
                // ÈüøÊáâÂºèÊï∏Êìö
                const currentPage = ref('records');
                const showAddModal = ref(false);
                const showBelieverModal = ref(false);
                const showReminderModal = ref(false);
                const showNotificationPopup = ref(false);
                const selectedYear = ref(new Date().getFullYear().toString());

                // Ë°®ÂñÆÊï∏Êìö
                const form = ref({
                    type: '',
                    amount: 0,
                    category: '',
                    donor: '',
                    description: '',
                    date: new Date()
                });

                const believerForm = ref({
                    name: '',
                    birthday: null,
                    phone: '',
                    email: '',
                    address: ''
                });

                const reminderForm = ref({
                    title: '',
                    description: '',
                    dueDate: new Date(),
                    repeat: 'none',
                    advanceDays: 1
                });

                // Êï∏ÊìöÂ≠òÂÑ≤
                const records = ref([]);
                const believers = ref([]);
                const reminders = ref([]);
                const editingReminder = ref(null);
                const editingBeliever = ref(null);
                const currentNotification = ref(null);
                const believerZodiacDisplay = ref('');

                // ÂàÜÈ°ûË®≠ÂÆö
                const categories = {
                    income: ['È¶ôÊ≤πÈå¢', 'ÈªûÁáàË≤ª', 'ÂÆâÂ§™Ê≠≤', 'ÂÖâÊòéÁáà', 'Âπ≥ÂÆâÁáà', 'ÊçêÊ¨æ', 'Ê≥ïÊúÉÊî∂ÂÖ•', 'Á±§Ë©©Êî∂ÂÖ•', 'ÂÖ∂‰ªñÊî∂ÂÖ•'],
                    expense: ['‰æõÂìÅË≤ªÁî®', 'È¶ôÁá≠Ë≤ªÁî®', 'Ê∞¥ÈõªË≤ª', 'Á∂≠‰øÆË≤ª', 'Ê∏ÖÊΩîË≤ª', 'Ê≥ïÊúÉÊîØÂá∫', '‰∫∫‰∫ãË≤ªÁî®', 'Ë°åÊîøË≤ªÁî®', 'ÂÖ∂‰ªñÊîØÂá∫']
                };
