<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>生成測試數據</title>
    <style>
        body {
            font-family: 'Microsoft JhengHei', sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .container {
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            text-align: center;
        }
        .btn {
            background: #4CAF50;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s;
        }
        .btn:hover {
            background: #45a049;
            transform: translateY(-2px);
        }
        .btn-danger {
            background: #f44336;
        }
        .btn-danger:hover {
            background: #da190b;
        }
        .result {
            margin-top: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            text-align: left;
        }
        h1 {
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🏛️ 廣清宮記帳軟體測試數據生成器</h1>
        <p>點擊下方按鈕生成豐富的測試數據，用於測試列印功能</p>
        
        <button class="btn" onclick="generateTestData()">🎲 生成測試數據</button>
        <button class="btn btn-danger" onclick="clearAllData()">🗑️ 清空所有數據</button>
        <button class="btn" onclick="goToMainApp()">🏠 返回主程式</button>
        
        <div id="result" class="result" style="display: none;"></div>
    </div>

    <script>
        function generateTestData() {
            console.log('開始生成測試數據...');
            
            // 清空現有數據
            localStorage.removeItem('temple-records');
            localStorage.removeItem('temple-believers');
            localStorage.removeItem('temple-reminders');
            
            // 生成財務記錄數據
            const records = [];
            const believers = [];
            const reminders = [];
            
            // 收入類別
            const incomeCategories = [
                '香油錢', '點燈費', '安太歲', '祈福金', '法會功德金', 
                '建廟基金', '慈善捐款', '節慶捐款', '特殊法會', '其他捐款'
            ];
            
            // 支出類別
            const expenseCategories = [
                '水電費', '清潔用品', '祭品採購', '維修費用', '人事費用',
                '法會用品', '慈善支出', '設備採購', '行政費用', '其他支出'
            ];
            
            // 信眾姓名列表
            const believerNames = [
                '王大明', '李小華', '陳美玲', '張志強', '林淑芬',
                '黃建國', '吳雅婷', '劉俊傑', '蔡佳蓉', '鄭文龍',
                '謝淑惠', '許志豪', '楊麗娟', '洪明德', '周雅雯',
                '朱建華', '何美珠', '呂志明', '蘇雅琪', '馬文傑',
                '高淑玲', '孫建國', '韓雅婷', '曾志強', '彭美華',
                '董文龍', '薛淑芬', '葉志豪', '范雅玲', '石建明'
            ];
            
            // 生成2023年和2024年的財務記錄
            let recordId = 1;
            
            for (let year = 2023; year <= 2024; year++) {
                for (let month = 1; month <= 12; month++) {
                    // 如果是2024年，只生成到當前月份
                    if (year === 2024 && month > new Date().getMonth() + 1) break;
                    
                    // 每月生成15-25筆記錄
                    const recordCount = Math.floor(Math.random() * 11) + 15;
                    
                    for (let i = 0; i < recordCount; i++) {
                        const isIncome = Math.random() > 0.3; // 70%機率是收入
                        const day = Math.floor(Math.random() * 28) + 1;
                        const date = `${year}-${month.toString().padStart(2, '0')}-${day.toString().padStart(2, '0')}`;
                        
                        if (isIncome) {
                            // 收入記錄
                            const category = incomeCategories[Math.floor(Math.random() * incomeCategories.length)];
                            const donor = believerNames[Math.floor(Math.random() * believerNames.length)];
                            let amount;
                            
                            // 根據類別設定金額範圍
                            switch (category) {
                                case '香油錢':
                                    amount = Math.floor(Math.random() * 500) + 100;
                                    break;
                                case '點燈費':
                                    amount = Math.floor(Math.random() * 300) + 200;
                                    break;
                                case '安太歲':
                                    amount = Math.floor(Math.random() * 400) + 600;
                                    break;
                                case '建廟基金':
                                    amount = Math.floor(Math.random() * 5000) + 1000;
                                    break;
                                case '法會功德金':
                                    amount = Math.floor(Math.random() * 2000) + 500;
                                    break;
                                default:
                                    amount = Math.floor(Math.random() * 1000) + 300;
                            }
                            
                            records.push({
                                id: recordId++,
                                type: 'income',
                                category: category,
                                amount: amount,
                                date: date,
                                description: `${category} - ${donor}`,
                                donor: donor,
                                createdAt: new Date(date).toISOString()
                            });
                        } else {
                            // 支出記錄
                            const category = expenseCategories[Math.floor(Math.random() * expenseCategories.length)];
                            let amount;
                            
                            // 根據類別設定金額範圍
                            switch (category) {
                                case '水電費':
                                    amount = Math.floor(Math.random() * 3000) + 2000;
                                    break;
                                case '祭品採購':
                                    amount = Math.floor(Math.random() * 2000) + 1000;
                                    break;
                                case '維修費用':
                                    amount = Math.floor(Math.random() * 5000) + 1000;
                                    break;
                                case '人事費用':
                                    amount = Math.floor(Math.random() * 8000) + 5000;
                                    break;
                                case '設備採購':
                                    amount = Math.floor(Math.random() * 10000) + 2000;
                                    break;
                                default:
                                    amount = Math.floor(Math.random() * 1500) + 500;
                            }
                            
                            records.push({
                                id: recordId++,
                                type: 'expense',
                                category: category,
                                amount: amount,
                                date: date,
                                description: `${category} - ${month}月份`,
                                donor: '',
                                createdAt: new Date(date).toISOString()
                            });
                        }
                    }
                }
            }
            
            // 生成信眾資料
            believerNames.forEach((name, index) => {
                const birthYear = 1950 + Math.floor(Math.random() * 50);
                const birthMonth = Math.floor(Math.random() * 12) + 1;
                const birthDay = Math.floor(Math.random() * 28) + 1;
                const birthday = `${birthYear}-${birthMonth.toString().padStart(2, '0')}-${birthDay.toString().padStart(2, '0')}`;
                
                // 計算該信眾的總捐款
                const believerRecords = records.filter(r => r.donor === name && r.type === 'income');
                const totalDonation = believerRecords.reduce((sum, r) => sum + r.amount, 0);
                
                believers.push({
                    name: name,
                    birthday: birthday,
                    phone: `09${Math.floor(Math.random() * 100000000).toString().padStart(8, '0')}`,
                    email: `${name.replace(/[^\w]/g, '')}@email.com`,
                    address: `台北市${['中正區', '大同區', '中山區', '松山區', '大安區'][Math.floor(Math.random() * 5)]}某某路${Math.floor(Math.random() * 200) + 1}號`,
                    totalDonation: totalDonation,
                    donationCount: believerRecords.length,
                    createdAt: new Date().toISOString()
                });
            });
            
            // 生成提醒事項
            const reminderTitles = [
                '準備春節法會用品', '檢查消防設備', '更新信眾資料',
                '準備中元普渡', '安排年度大掃除', '檢查電器設備',
                '準備媽祖聖誕法會', '更新財務報表', '安排志工培訓',
                '檢查建築安全', '準備重陽節活動', '更新網站資訊'
            ];
            
            reminderTitles.forEach((title, index) => {
                const dueDate = new Date();
                dueDate.setDate(dueDate.getDate() + Math.floor(Math.random() * 90) + 1);
                
                reminders.push({
                    id: index + 1,
                    title: title,
                    description: `${title}的詳細說明和注意事項`,
                    dueDate: dueDate.toISOString().split('T')[0],
                    repeat: ['none', 'daily', 'weekly', 'monthly', 'yearly'][Math.floor(Math.random() * 5)],
                    advanceDays: Math.floor(Math.random() * 7) + 1,
                    completed: Math.random() > 0.7,
                    createdAt: new Date().toISOString()
                });
            });
            
            // 保存到 localStorage
            localStorage.setItem('temple-records', JSON.stringify(records));
            localStorage.setItem('temple-believers', JSON.stringify(believers));
            localStorage.setItem('temple-reminders', JSON.stringify(reminders));
            
            const totalIncome = records.filter(r => r.type === 'income').reduce((sum, r) => sum + r.amount, 0);
            const totalExpense = records.filter(r => r.type === 'expense').reduce((sum, r) => sum + r.amount, 0);
            
            // 顯示結果
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = `
                <h3>✅ 測試數據生成完成！</h3>
                <p>📊 財務記錄: <strong>${records.length}</strong> 筆</p>
                <p>👥 信眾資料: <strong>${believers.length}</strong> 筆</p>
                <p>⏰ 提醒事項: <strong>${reminders.length}</strong> 筆</p>
                <p>💰 總收入: <strong>${totalIncome.toLocaleString()}</strong> 元</p>
                <p>💸 總支出: <strong>${totalExpense.toLocaleString()}</strong> 元</p>
                <p>💵 結餘: <strong>${(totalIncome - totalExpense).toLocaleString()}</strong> 元</p>
                <p style="margin-top: 15px; color: #ffeb3b;">
                    <strong>📝 數據涵蓋範圍:</strong><br>
                    • 2023年1月 - 2024年${new Date().getMonth() + 1}月<br>
                    • 多種收入和支出類別<br>
                    • 30位信眾的完整資料<br>
                    • 12項提醒事項
                </p>
            `;
            resultDiv.style.display = 'block';
            
            console.log('✅ 測試數據生成完成！');
        }
        
        function clearAllData() {
            if (confirm('確定要清空所有數據嗎？此操作無法復原！')) {
                localStorage.removeItem('temple-records');
                localStorage.removeItem('temple-believers');
                localStorage.removeItem('temple-reminders');
                localStorage.removeItem('temple-inventory');
                localStorage.removeItem('temple-stock-movements');
                localStorage.removeItem('temple-events');
                
                const resultDiv = document.getElementById('result');
                resultDiv.innerHTML = '<h3>🗑️ 所有數據已清空</h3>';
                resultDiv.style.display = 'block';
            }
        }
        
        function goToMainApp() {
            window.location.href = 'index-enhanced.html';
        }
    </script>
</body>
</html>
