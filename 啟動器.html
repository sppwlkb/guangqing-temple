<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>廣清宮記帳軟體 - 啟動器</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .launcher-container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            max-width: 800px;
            width: 100%;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .logo {
            font-size: 64px;
            margin-bottom: 20px;
        }
        
        .title {
            font-size: 32px;
            color: #333;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 16px;
            color: #666;
        }
        
        .version-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .version-card {
            border: 2px solid #e1e5e9;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .version-card:hover {
            border-color: #667eea;
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.1);
        }
        
        .version-card.recommended {
            border-color: #28a745;
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
        }
        
        .version-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }
        
        .version-title {
            font-size: 20px;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }
        
        .version-description {
            color: #666;
            margin-bottom: 15px;
            line-height: 1.5;
        }
        
        .version-features {
            list-style: none;
            margin-bottom: 20px;
        }
        
        .version-features li {
            color: #555;
            margin-bottom: 5px;
            font-size: 14px;
        }
        
        .version-features li:before {
            content: "✓ ";
            color: #28a745;
            font-weight: bold;
        }
        
        .launch-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }
        
        .launch-btn:hover {
            background: #5a6fd8;
        }
        
        .launch-btn.recommended {
            background: #28a745;
        }
        
        .launch-btn.recommended:hover {
            background: #218838;
        }
        
        .status-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .status-title {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
        }
        
        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .status-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: white;
            border-radius: 8px;
        }
        
        .status-label {
            color: #666;
        }
        
        .status-value {
            font-weight: bold;
        }
        
        .status-ok {
            color: #28a745;
        }
        
        .status-error {
            color: #dc3545;
        }
        
        .help-section {
            background: #e3f2fd;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .help-title {
            font-size: 16px;
            font-weight: bold;
            color: #1976d2;
            margin-bottom: 10px;
        }
        
        .help-text {
            color: #1565c0;
            line-height: 1.5;
        }
        
        @media (max-width: 768px) {
            .version-grid {
                grid-template-columns: 1fr;
            }
            
            .launcher-container {
                padding: 20px;
            }
            
            .title {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <div class="launcher-container">
        <div class="header">
            <div class="logo">🏛️</div>
            <div class="title">廣清宮快速記帳軟體</div>
            <div class="subtitle">請選擇適合的版本啟動</div>
        </div>
        
        <div class="status-section">
            <div class="status-title">🔍 系統檢測</div>
            <div class="status-grid">
                <div class="status-item">
                    <span class="status-label">瀏覽器</span>
                    <span class="status-value" id="browser-status">檢測中...</span>
                </div>
                <div class="status-item">
                    <span class="status-label">JavaScript</span>
                    <span class="status-value status-ok">正常</span>
                </div>
                <div class="status-item">
                    <span class="status-label">本地存儲</span>
                    <span class="status-value" id="storage-status">檢測中...</span>
                </div>
                <div class="status-item">
                    <span class="status-label">網路連線</span>
                    <span class="status-value" id="network-status">檢測中...</span>
                </div>
            </div>
        </div>
        
        <div class="version-grid">
            <div class="version-card recommended" onclick="startHttpServer()">
                <div class="version-icon">🌐</div>
                <div class="version-title">HTTP服務器版 (推薦)</div>
                <div class="version-description">解決CORS問題，支援完整雲端同步和QR Code安裝</div>
                <ul class="version-features">
                    <li>✅ 解決CORS錯誤</li>
                    <li>☁️ 雲端同步功能</li>
                    <li>📱 QR Code安裝</li>
                    <li>🔄 完整PWA支援</li>
                    <li>🌐 手機網路訪問</li>
                </ul>
                <button class="launch-btn recommended">啟動HTTP服務器</button>
            </div>

            <div class="version-card" onclick="launchVersion('offline')">
                <div class="version-icon">🚀</div>
                <div class="version-title">離線版本</div>
                <div class="version-description">完全離線運行，無需網路連線，啟動最快</div>
                <ul class="version-features">
                    <li>無需網路連線</li>
                    <li>啟動速度最快</li>
                    <li>完整記帳功能</li>
                    <li>資料匯出功能</li>
                    <li>響應式設計</li>
                </ul>
                <button class="launch-btn">立即啟動</button>
            </div>
            
            <div class="version-card" onclick="launchVersion('enhanced')">
                <div class="version-icon">⭐</div>
                <div class="version-title">完整版本</div>
                <div class="version-description">功能最完整，包含圖表和高級功能</div>
                <ul class="version-features">
                    <li>Vue 3 + Element Plus</li>
                    <li>ECharts 圖表功能</li>
                    <li>智能提醒系統</li>
                    <li>PWA 手機支援</li>
                    <li>高級統計分析</li>
                </ul>
                <button class="launch-btn">啟動完整版</button>
            </div>
            
            <div class="version-card" onclick="launchVersion('simple')">
                <div class="version-icon">📱</div>
                <div class="version-title">簡化版本</div>
                <div class="version-description">基本功能版本，適合簡單使用</div>
                <ul class="version-features">
                    <li>核心記帳功能</li>
                    <li>簡潔界面</li>
                    <li>快速載入</li>
                    <li>手機友好</li>
                    <li>基本統計</li>
                </ul>
                <button class="launch-btn">啟動簡化版</button>
            </div>
            
            <div class="version-card" onclick="launchVersion('test')">
                <div class="version-icon">🔧</div>
                <div class="version-title">測試版本</div>
                <div class="version-description">用於診斷問題和系統測試</div>
                <ul class="version-features">
                    <li>系統診斷工具</li>
                    <li>錯誤檢測</li>
                    <li>性能測試</li>
                    <li>兼容性檢查</li>
                    <li>問題排除</li>
                </ul>
                <button class="launch-btn">啟動測試版</button>
            </div>
        </div>
        
        <div class="help-section">
            <div class="help-title">💡 使用建議</div>
            <div class="help-text">
                <strong>推薦使用離線版本</strong>：如果您遇到啟動問題，離線版本是最穩定的選擇，不依賴任何外部資源。<br>
                <strong>網路問題</strong>：如果網路連線不穩定，完整版本可能載入較慢。<br>
                <strong>功能需求</strong>：如果只需要基本記帳功能，簡化版本已經足夠使用。
            </div>
        </div>
    </div>

    <script>
        // 系統檢測
        function detectSystem() {
            // 檢測瀏覽器
            const browserInfo = navigator.userAgent.split(' ')[0];
            document.getElementById('browser-status').textContent = browserInfo;
            document.getElementById('browser-status').className = 'status-value status-ok';
            
            // 檢測本地存儲
            try {
                localStorage.setItem('test', 'ok');
                localStorage.removeItem('test');
                document.getElementById('storage-status').textContent = '可用';
                document.getElementById('storage-status').className = 'status-value status-ok';
            } catch (e) {
                document.getElementById('storage-status').textContent = '不可用';
                document.getElementById('storage-status').className = 'status-value status-error';
            }
            
            // 檢測網路連線
            if (navigator.onLine) {
                // 嘗試載入外部資源測試網路
                const img = new Image();
                img.onload = function() {
                    document.getElementById('network-status').textContent = '正常';
                    document.getElementById('network-status').className = 'status-value status-ok';
                };
                img.onerror = function() {
                    document.getElementById('network-status').textContent = '受限';
                    document.getElementById('network-status').className = 'status-value status-error';
                };
                img.src = 'https://unpkg.com/vue@3.3.4/dist/vue.global.js';
                
                // 超時處理
                setTimeout(() => {
                    if (document.getElementById('network-status').textContent === '檢測中...') {
                        document.getElementById('network-status').textContent = '緩慢';
                        document.getElementById('network-status').className = 'status-value status-error';
                    }
                }, 3000);
            } else {
                document.getElementById('network-status').textContent = '離線';
                document.getElementById('network-status').className = 'status-value status-error';
            }
        }

        // 啟動HTTP服務器
        function startHttpServer() {
            const instructions = `🌐 HTTP服務器啟動說明

請按照以下步驟啟動HTTP服務器：

方法一：使用批次檔案 (推薦)
1. 雙擊 "start-server.bat" 檔案
2. 等待服務器啟動
3. 在瀏覽器中開啟顯示的網址

方法二：使用Node.js
1. 開啟命令提示字元 (cmd)
2. 切換到專案目錄
3. 執行: node simple-server.js
4. 在瀏覽器中開啟 http://localhost:8000

方法三：使用Python
1. 開啟命令提示字元 (cmd)
2. 切換到專案目錄
3. 執行: python -m http.server 8000
4. 在瀏覽器中開啟 http://localhost:8000

✅ 啟動後即可使用完整的雲端同步和QR Code功能！`;

            alert(instructions);
        }

        // 啟動版本
        function launchVersion(version) {
            const versions = {
                'offline': 'index-offline.html',
                'enhanced': 'index-enhanced.html',
                'simple': 'index-simple.html',
                'test': 'test-simple.html'
            };
            
            if (versions[version]) {
                window.location.href = versions[version];
            }
        }
        
        // 頁面載入完成後執行檢測
        window.addEventListener('load', detectSystem);
    </script>
</body>
</html>
